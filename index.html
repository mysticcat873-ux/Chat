<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple AI Chatbot</title>
    <style>
        /* --- CSS Variables for Easy Theme Toggling --- */
        :root {
            --bg-color: #ffffff;
            --sidebar-bg: #f7f7f8;
            --text-color: #333333;
            --border-color: #e5e5e5;
            --accent-color: #007bff;
            --msg-user: #007bff;
            --msg-ai: #f0f0f0;
            --sidebar-width: 300px;
        }

        .dark-mode {
            --bg-color: #212121;
            --sidebar-bg: #171717;
            --text-color: #ececec;
            --border-color: #444444;
            --accent-color: #10a37f;
            --msg-user: #10a37f;
            --msg-ai: #343541;
        }

        /* --- Global Styles --- */
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { background-color: var(--bg-color); color: var(--text-color); overflow: hidden; height: 100vh; display: flex; transition: background 0.3s; }

        /* --- Sidebar Styles --- */
        #sidebar {
            width: var(--sidebar-width);
            background: var(--sidebar-bg);
            border-right: 1px solid var(--border-color);
            position: fixed;
            height: 100%;
            left: calc(-1 * var(--sidebar-width));
            transition: left 0.3s ease;
            z-index: 1000;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        #sidebar.open { left: 0; }

        .sidebar-header { font-weight: bold; border-bottom: 1px solid var(--border-color); padding-bottom: 10px; margin-bottom: 10px; }
        
        .setting-item { display: flex; flex-direction: column; gap: 8px; }
        .setting-item label { font-size: 0.85rem; opacity: 0.8; }
        .setting-item input, .setting-item textarea {
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background: var(--bg-color);
            color: var(--text-color);
        }

        /* --- Main Content Layout --- */
        #main-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            height: 100%;
            transition: margin-left 0.3s ease;
        }

        /* --- Header Styles --- */
        header {
            padding: 15px 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--bg-color);
        }

        .btn {
            padding: 8px 16px;
            border: 1px solid var(--border-color);
            background: var(--bg-color);
            color: var(--text-color);
            cursor: pointer;
            border-radius: 6px;
            font-size: 0.9rem;
            transition: 0.2s;
        }
        .btn:hover { background: var(--sidebar-bg); }
        .btn-primary { background: var(--accent-color); color: white; border: none; }
        .btn-primary:hover { opacity: 0.9; }

        /* --- Chat Area --- */
        #chat-window {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .message {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 12px;
            line-height: 1.5;
            word-wrap: break-word;
        }

        .user-message {
            align-self: flex-end;
            background-color: var(--msg-user);
            color: white;
            border-bottom-right-radius: 2px;
        }

        .ai-message {
            align-self: flex-start;
            background-color: var(--msg-ai);
            color: var(--text-color);
            border-bottom-left-radius: 2px;
        }

        /* --- Input Area --- */
        .input-area {
            padding: 20px;
            border-top: 1px solid var(--border-color);
            display: flex;
            gap: 10px;
            background: var(--bg-color);
        }

        #user-input {
            flex: 1;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            outline: none;
            background: var(--bg-color);
            color: var(--text-color);
        }

        /* --- Overlays --- */
        #overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.3);
            z-index: 999;
        }
        #overlay.show { display: block; }

    </style>
</head>
<body>

    <!-- Slidable Sidebar for Settings -->
    <div id="sidebar">
        <div class="sidebar-header">Settings</div>
        
        <div class="setting-item">
            <label>API Key</label>
            <input type="password" id="api-key" placeholder="Enter API Key...">
        </div>

        <div class="setting-item">
            <label>Model ID</label>
            <input type="text" id="model-id" placeholder="e.g. gpt-4, gemini-pro">
        </div>

        <div class="setting-item">
            <label>System Instructions</label>
            <textarea id="instructions" rows="4" placeholder="You are a helpful assistant..."></textarea>
        </div>

        <div class="setting-item">
            <label>Theme</label>
            <button class="btn" onclick="toggleDarkMode()">Toggle Dark Mode</button>
        </div>

        <div style="margin-top: auto;">
            <button class="btn btn-primary" style="width: 100%;" onclick="saveSettings()">Save & Close</button>
        </div>
    </div>

    <!-- Overlay for closing sidebar -->
    <div id="overlay" onclick="toggleSidebar()"></div>

    <!-- Main Chat Interface -->
    <div id="main-container">
        <header>
            <button class="btn" onclick="toggleSidebar()">â˜° Settings</button>
            <button class="btn btn-primary" onclick="newChat()">+ New Chat</button>
        </header>

        <div id="chat-window">
            <div class="message ai-message">Hello! Adjust settings in the sidebar to start chatting with your AI model.</div>
        </div>

        <div class="input-area">
            <input type="text" id="user-input" placeholder="Type your message here..." onkeypress="handleKeyPress(event)">
            <button class="btn btn-primary" onclick="sendMessage()">Send</button>
        </div>
    </div>

    <script>
        // --- State Management ---
        const chatWindow = document.getElementById('chat-window');
        const userInput = document.getElementById('user-input');
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('overlay');

        // Load saved settings on startup
        window.onload = () => {
            document.getElementById('api-key').value = localStorage.getItem('api_key') || '';
            document.getElementById('model-id').value = localStorage.getItem('model_id') || 'gpt-3.5-turbo';
            document.getElementById('instructions').value = localStorage.getItem('instructions') || '';
            
            if (localStorage.getItem('theme') === 'dark') {
                document.body.classList.add('dark-mode');
            }
        };

        // --- UI Functions ---
        function toggleSidebar() {
            sidebar.classList.toggle('open');
            overlay.classList.toggle('show');
        }

        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            const isDark = document.body.classList.contains('dark-mode');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
        }

        function saveSettings() {
            localStorage.setItem('api_key', document.getElementById('api-key').value);
            localStorage.setItem('model_id', document.getElementById('model-id').value);
            localStorage.setItem('instructions', document.getElementById('instructions').value);
            toggleSidebar();
            alert('Settings Saved!');
        }

        function newChat() {
            chatWindow.innerHTML = '<div class="message ai-message">New session started. How can I help you today?</div>';
        }

        function addMessage(text, isUser) {
            const msgDiv = document.createElement('div');
            msgDiv.className = `message ${isUser ? 'user-message' : 'ai-message'}`;
            msgDiv.textContent = text;
            chatWindow.appendChild(msgDiv);
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        function handleKeyPress(e) {
            if (e.key === 'Enter') sendMessage();
        }

        // --- Logic Functions ---
        async function sendMessage() {
            const text = userInput.value.trim();
            if (!text) return;

            addMessage(text, true);
            userInput.value = '';

            // Placeholder for AI Logic
            // In a real app, you would use fetch() with the API Key/Model ID from localStorage here.
            setTimeout(() => {
                const model = localStorage.getItem('model_id') || 'Unknown Model';
                addMessage(`This is a UI demo. To connect to an actual AI, implement a fetch call to the ${model} endpoint using your stored API key.`, false);
            }, 600);
        }
    </script>
</body>
  </html>
